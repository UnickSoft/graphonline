version=pmwiki-2.2.71 ordered=1 urlencoded=1
author=ff
charset=UTF-8
csum=fixed a typo in the markup
name=PmWiki.PathVariables
rev=65
targets=PmWiki.WhySeeIfCSSExists,Cookbook.SharedPages,Cookbook.CleanUrls,PmWiki.SkinTemplates,Cookbook.PerGroupSubDirectories,PmWiki.LocalCustomizations,PmWiki.PerGroupCustomizations,PmWiki.WikiFarms,PmWiki.LayoutVariables,PmWiki.LinkVariables,PmWiki.EditVariables,PmWiki.UploadVariables
text=(:Summary:variables used to specify various locations on the server:)%0a%0aWhen dealing with file or path variables, one has to recognize the difference between working with URLs and files on disk.  For example:%0a* The include() statements are used to include other files (on disk) into the currently running PmWiki script.  Thus they require paths on the server's filesystem. %0a* The $ScriptUrl and $PubDirUrl variables are used to tell a ''browser'', connecting via the webserver, how to execute the pmwiki script ($ScriptUrl) and the base url for getting files from PmWiki's pub/ directory ($PubDirUrl).%0a%0aNote that a browser needs a URL (http://example.com/pmwiki/pub) while an include statement requires a server file path ($FarmD/scripts/something.php).%0a%0a:$FarmD: The directory on the server where the farm is located (i.e., the directory containing the farm's copy of ''pmwiki.php'' and the ''scripts/'' directory).  This directory is automatically determined by pmwiki.php when it runs, and can be used to distinguish the farm's ''cookbook/'' and ''pub/'' subdirectories from a field's subdirectories.%0a%0a:$FarmPubDirUrl: is the url that refers to the @@pub@@ directory for an entire farm. It defaults to the same value as $PubDirUrl. %0a%0a:$PageCSSListFmt: is an associative array which PmWiki uses to find any local css configuration files. It consists of a set of (''key'',''value'') pairs %25green%25 that point to the same file%25%25. The ''key'' is a possible path to a file on disk holding the css data, while the ''value'' is the coresponding URL for that %25green%25same file%25%25. They keys are tested in turn, and for each named file that exists, the browser is instructed to load the corresponding URL. This allows for PMWiki to only load the css file if it exists. ([[PmWiki:WhySeeIfCSSExists|Why see if a CSS exists?]])  The default value for this variable is:%0a%0a->[@%0a$PageCSSListFmt = array(%0a  'pub/css/local.css' => '$PubDirUrl/css/local.css',%0a  'pub/css/{$Group}.css' => '$PubDirUrl/css/{$Group}.css',%0a  'pub/css/{$FullName}.css' => '$PubDirUrl/css/{$FullName}.css');%0a@]%0a%0a->Note that the default (as of version pmwiki-2.1.beta26) makes no reference to $FarmPubDirUrl for css configuration files. If you wish to be able to place css configuration files in both the field's @@pub@@ directory, and the farm's @@pub@@ directory, you may want to add these lines to your @@local/config.php@@ file (as described in [[Cookbook:SharedPages]]):%0a%0a->        %25green%25# this adds farm.css to all wikis%0a->[@%0a$PageCSSListFmt = array(%0a  '$FarmD/pub/css/farm.css' => '$FarmPubDirUrl/css/farm.css',%0a  'pub/css/local.css' => '$PubDirUrl/css/local.css',%0a  'pub/css/$Group.css' => '$PubDirUrl/css/$Group.css',%0a  'pub/css/$FullName.css' => '$PubDirUrl/css/$FullName.css');%0a@]%0a%0a->        %25green%25# this enables farm css files in a similar manner to a local wiki%0a->[@%0a$PageCSSListFmt = array(%0a  '$FarmD/pub/css/local.css' => '$FarmPubDirUrl/css/local.css',%0a  '$FarmD/pub/css/$Group.css' => '$FarmPubDirUrl/css/$Group.css',%0a  '$FarmD/pub/css/$FullName.css' => '$FarmPubDirUrl/css/$FullName.css',%0a  'pub/css/local.css' => '$PubDirUrl/css/local.css',%0a  'pub/css/$Group.css' => '$PubDirUrl/css/$Group.css',%0a  'pub/css/$FullName.css' => '$PubDirUrl/css/$FullName.css');%0a@]%0a%0a->Note the difference between CSS configuration files and CSS files associated with a skin. Skin files, including associated CSS, can be put in either the farm or the field @@pub/skins@@ directory, and the program will find them.%0a%0a:$PubDirUrl: is the URL that refers to the @@pub@@ directory. That directory contains all the files and subdirectories that must be directly accessible from a browser (e.g. CSS and HTML files). Most prominent here is the @@skins@@ subdirectory.%0a->The following may work for you'^[[Cookbook:CleanUrls#multiviews|#]]^'%0a->[@  $ScriptUrl = 'http://'.$_SERVER['HTTP_HOST'].'/pmwiki/pmwiki.php';%0a  $PubDirUrl = 'http://'.$_SERVER['HTTP_HOST'].'/pmwiki/pub';@]%0a%0a%25rfloat%25{$ScriptUrl}%0a:$ScriptUrl: is the URL that you want people's browsers to use when accessing PmWiki, either as a field or farm.  It's used whenever PmWiki needs to generate a link to another PmWiki page or action. PmWiki is usually fairly good about "guessing" the correct value for $ScriptUrl on its own, but sometimes an admin needs to set it explicitly because of URL manipulations by the webserver (such as Cookbook:CleanUrls, mod_rewrite, bizarre PHP configurations, and so on).%0a%0a:$SkinDir:Set by ''scripts/skins.php'' to be the base url of the current skin's directory (i.e., within a 'pub/skins/' directory).  This variable is typically used inside of a skin .tmpl file to provide access to .css files and graphic images associated with the skin. See [[SkinTemplates#security|security note]] regarding use.%0a%0a:$SkinDirUrl:Set by ''scripts/skins.php'' to be the base path of the current skin's directory (i.e., within a 'pub/skins/' directory).  This variable is typically used inside of a skin .tmpl file to provide access to secondary files. See [[SkinTemplates#security|security note]] regarding use.%0a%0a:$WorkDir: This variable is a string that gives a local path to a directory where the pmwiki engine can create temporary files etc. %0a: :PmWiki needs this for a variety of things, such as building merged edits, caching mailposts entries, keeping track of the last modification time of the site, other types of cache, etc.  Do not confuse this variable with $WikiDir; the reason that both $WorkDir and $WikiDir refer by default to the directory [@wiki.d/@] is merely to simplify things for the administrator. %0a%0a:$WikiDir: A `PageStore-object that refers to how wiki pages are stored. %0a: :This can be a simple reference to a directory (typically ''wiki.d/''), or something more advanced such as a `MySQL backend or a .dbm-file.  Do not confuse this variable with $WorkDir; the reason that both $WorkDir and $WikiDir refer by default to the directory [@wiki.d/@] is merely to simplify things for the administrator.%0a: :To store groups of pages in subdirectories add [@$WikiDir = new PageStore('wiki.d/$Group/$FullName');@] to the start of your config file. '^[[Cookbook:PerGroupSubDirectories|#]]^'%0a%0a:$WikiLibDirs: An array of `PageStore objects that specify where to look for pages.  %0a: :By default it is set up to look in ''wiki.d/'' and ''wikilib.d/'', but can be changed to look other places.  %0a: :For example, to exclude the pages that are bundled in the PmWiki distribution, use the line below.  (Note that some features such as editing and search rely on having certain pages available, so you may need to copy them to the $WikiDir.)%0a->[@$WikiLibDirs = array(&$WikiDir); @]%0a: :Another example%0a->[@%0a 	## for any page name, use the version located in wiki.d if it exists,%0a 	## use the version located in wikilib2.d, if a wiki.d version does not, and%0a 	## the version located in wikilib.d, if neither of the above exists%0a	$WikiLibDirs = array(&$WikiDir,%0a	    new PageStore('wikilib2.d/{$FullName}'),%0a	    new PageStore('$FarmD/wikilib.d/{$FullName}'));%0a@]%0a: : See also [[(http://www.pmwiki.org/wiki/Category/)CustomPageStore]].%0a%0a%0a:$LocalDir: The filesystem location of the ''local/'' directory, holding [[local customization(s)]] and [[(PmWiki:)per group customizations]] files.  Typically set in a [[WikiFarm(s)]]'s ''farmconfig.php''.  (Note that farm configuration files always occur in ''$FarmD/local/farmconfig.php'', regardless of any setting for $LocalDir.)%0a%0a%0a!!See also%0a* [[Layout Variables]] for URL layout options%0a* [[Link Variables]] - variables that control the display of links in pages%0a* [[Edit Variables]] - variables used when editing pages%0a* [[Upload Variables]] - variables used for uploads/attachments
time=1420736312
